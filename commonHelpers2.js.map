{"version":3,"file":"commonHelpers2.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector(\".form-search\");\nconst ul = document.querySelector(\".ul-gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnMore = document.querySelector(\".button-load-more\");\n\nlet searchInfo;\nlet pageCount;\nconst limit = 40;\nlet totalItems;\n\nvar lightbox = new SimpleLightbox('.ul-gallery a', {   \n  captionsData: 'alt',\n  captionDelay: 250, }); \n\n\nform.addEventListener(\"submit\", createListItem);\n\nasync function createListItem(event){\n  btnMore.classList.add('search');\n  event.preventDefault();\n  searchInfo= form.item.value.trim();\n  ul.innerHTML = \"\"\n  pageCount=1;\n\n  const posts = await paramList(pageCount, searchInfo);\n  createImg(posts);\n}\n\n\nbtnMore.addEventListener(\"click\", async ()=>{\n  try {\n    btnMore.classList.add('search');\n    pageCount++;\n    const posts = await paramList(pageCount,searchInfo);\n    createImg(posts);\n    form.reset();\n    scrollByElements()\n  } \n  catch (error) {\n    return iziToast.error({\n      position: \"topRight\",\n      message: error,\n    });\n  }\n})\n\n\n\nasync function paramList(pageCount, searchInfo){\n  loader.classList.remove(\"search\");\n  const itemParam = new URLSearchParams({\n    key:\"41728524-9ad3c3555a09648a5caa6ae20\",\n    q:searchInfo,\n    image_type : \"photo\",\n    orientation :\"horizontal\",\n    safesearch : true,\n    page : pageCount,\n    per_page: limit\n  });\n  const collection = await axios.get(`https://pixabay.com/api/?${itemParam}`)\n  return collection.data;\n}\n\n\nfunction createImg(posts){\n  if(posts.total === 0){\n    iziToast.error({\n      title: 'No result',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position:\"topRight\"\n    });\n    loader.classList.add('search');\n    return;\n  }\n  const markup = posts.hits.reduce((acc, elem)=>\n  acc + `<li class=\"element\"><a href=\"${elem.largeImageURL}\"><img class=\"image\" src=\"${elem.webformatURL}\"  alt=\"${elem.tags}\"></a>\n  <div class=\"container-stat\">\n  <p class=\"stat\">Likes <span class=\"stat-value\">${elem.likes}</span></p>\n  <p class=\"stat\">Views <span class=\"stat-value\">${elem.views}</span></p>\n  <p class=\"stat\">Comments <span class=\"stat-value\">${elem.comments}</span></p>\n  <p class=\"stat\">Downloads <span class=\"stat-value\">${elem.downloads}</span></p>\n  </div></li>`, \"\")\n \n  ul.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n  loader.classList.add('search');\n  totalItems = posts.totalHits;\n\n  if(pageCount>=Math.ceil(totalItems/limit)){\n    btnMore.classList.add(\"search\");\n    return iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }\n  else{\n    btnMore.classList.remove('search');\n  }\n}\n\n\nfunction scrollByElements(){\n  let elem = document.querySelector(\".element\")\n  let rect = elem.getBoundingClientRect();\n\n  window.scrollBy({\n  top: 2*rect.height,\n  behavior: \"smooth\",\n});}\n"],"names":["form","ul","loader","btnMore","searchInfo","pageCount","limit","totalItems","lightbox","SimpleLightbox","createListItem","event","posts","paramList","createImg","scrollByElements","error","iziToast","itemParam","axios","markup","acc","elem","rect"],"mappings":"kGAOA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAK,SAAS,cAAc,aAAa,EACzCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,mBAAmB,EAE1D,IAAIC,EACAC,EACJ,MAAMC,EAAQ,GACd,IAAIC,EAEJ,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAAG,CAAG,EAGtBT,EAAK,iBAAiB,SAAUU,CAAc,EAE9C,eAAeA,EAAeC,EAAM,CAClCR,EAAQ,UAAU,IAAI,QAAQ,EAC9BQ,EAAM,eAAc,EACpBP,EAAYJ,EAAK,KAAK,MAAM,KAAI,EAChCC,EAAG,UAAY,GACfI,EAAU,EAEV,MAAMO,EAAQ,MAAMC,EAAUR,EAAWD,CAAU,EACnDU,EAAUF,CAAK,CACjB,CAGAT,EAAQ,iBAAiB,QAAS,SAAU,CAC1C,GAAI,CACFA,EAAQ,UAAU,IAAI,QAAQ,EAC9BE,IACA,MAAMO,EAAQ,MAAMC,EAAUR,EAAUD,CAAU,EAClDU,EAAUF,CAAK,EACfZ,EAAK,MAAK,EACVe,EAAkB,CACnB,OACMC,EAAO,CACZ,OAAOC,EAAS,MAAM,CACpB,SAAU,WACV,QAASD,CACf,CAAK,CACF,CACH,CAAC,EAID,eAAeH,EAAUR,EAAWD,EAAW,CAC7CF,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMgB,EAAY,IAAI,gBAAgB,CACpC,IAAI,qCACJ,EAAEd,EACF,WAAa,QACb,YAAa,aACb,WAAa,GACb,KAAOC,EACP,SAAUC,CACd,CAAG,EAED,OADmB,MAAMa,EAAM,IAAI,4BAA4BD,CAAS,EAAE,GACxD,IACpB,CAGA,SAASJ,EAAUF,EAAM,CACvB,GAAGA,EAAM,QAAU,EAAE,CACnBK,EAAS,MAAM,CACb,MAAO,YACP,QACE,2EACF,SAAS,UACf,CAAK,EACDf,EAAO,UAAU,IAAI,QAAQ,EAC7B,MACD,CACD,MAAMkB,EAASR,EAAM,KAAK,OAAO,CAACS,EAAKC,IACvCD,EAAM,gCAAgCC,EAAK,aAAa,6BAA6BA,EAAK,YAAY,WAAWA,EAAK,IAAI;AAAA;AAAA,mDAEzEA,EAAK,KAAK;AAAA,mDACVA,EAAK,KAAK;AAAA,sDACPA,EAAK,QAAQ;AAAA,uDACZA,EAAK,SAAS;AAAA,eACrD,EAAE,EAOhB,GALArB,EAAG,mBAAmB,YAAamB,CAAM,EACzCZ,EAAS,QAAO,EAChBN,EAAO,UAAU,IAAI,QAAQ,EAC7BK,EAAaK,EAAM,UAEhBP,GAAW,KAAK,KAAKE,EAAWD,CAAK,EACtC,OAAAH,EAAQ,UAAU,IAAI,QAAQ,EACvBc,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACf,CAAK,EAGDd,EAAQ,UAAU,OAAO,QAAQ,CAErC,CAGA,SAASY,GAAkB,CAEzB,IAAIQ,EADO,SAAS,cAAc,UAAU,EAC5B,wBAEhB,OAAO,SAAS,CAChB,IAAK,EAAEA,EAAK,OACZ,SAAU,QACZ,CAAC,CAAE"}